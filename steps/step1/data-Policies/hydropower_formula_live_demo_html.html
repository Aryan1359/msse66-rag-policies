<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Hydropower Formula – Live Demo</title>
<style>
  :root{
    --bg:#0b1320; --panel:#0f1b2e; --card:#101c30; --muted:#9bb2d9; --text:#eaf1ff;
    --accent:#22d3ee; --accent2:#60a5fa; --ok:#34d399; --warn:#f59e0b; --bad:#f87171;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;color:var(--text);background:linear-gradient(180deg,var(--bg),#0b1320 60%,#0e172a)}
  header{padding:24px 16px;border-bottom:1px solid #1e2a44;position:sticky;top:0;background:rgba(11,19,32,.9);backdrop-filter:blur(8px);z-index:20}
  .wrap{max-width:1100px;margin:0 auto}
  h1{margin:0;font-size:clamp(20px,3.2vw,30px);letter-spacing:.2px}
  .sub{color:var(--muted);font-size:14px;margin-top:6px}

  main{padding:18px 16px}
  .grid{display:grid;gap:18px}
  .g2{grid-template-columns:1.2fr .8fr}
  @media (max-width:900px){.g2{grid-template-columns:1fr}}

  .card{background:var(--card);border:1px solid #223153;border-radius:16px;padding:16px;box-shadow:0 10px 30px rgba(0,0,0,.35)}
  h2{margin:0 0 10px;font-size:20px}
  h3{margin:4px 0 10px;font-size:16px;color:#cfe0ff}
  p,li,label,small{color:#d8e6ff}

  .formula{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size:18px; color:#bfe4ff;}
  .formula b{color:#fff}

  .controls{display:grid;gap:10px}
  .row{display:grid;grid-template-columns:160px 1fr 120px;gap:10px;align-items:center}
  .row input[type="range"]{width:100%}
  .row input[type="number"]{width:100%;padding:8px;border-radius:10px;border:1px solid #2a3b5f;background:#0c172a;color:#eaf1ff}
  .unit{color:#9ec5ff;font-size:12px}

  .bar{height:16px;border-radius:10px;background:#0b1628;border:1px solid #203153;overflow:hidden}
  .bar>div{height:100%;background:linear-gradient(90deg,var(--accent2),var(--accent));width:0%}

  .presets{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px}
  button{cursor:pointer;border:none;border-radius:12px;padding:9px 12px;font-weight:600;color:#03101a;background:linear-gradient(90deg,#2563eb,#22d3ee)}
  .ghost{background:#0d1a2d;color:#cfe0ff;border:1px solid #203153}
  .small{font-size:12px;color:#a9c0e6}

  .big{font-weight:800;font-size:clamp(22px,4.2vw,34px)}
  .mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;}

  details{margin-top:10px}
  details summary{cursor:pointer;color:#9ec5ff}
  .tbl{width:100%;border-collapse:collapse;margin-top:8px}
  .tbl th,.tbl td{border:1px solid #2a3b5f;padding:8px;text-align:left}
  .tbl th{background:#11203a}

  .pill{display:inline-block;padding:3px 8px;border-radius:999px;border:1px solid #26406e;background:#0c172a;color:#9ec5ff;font-size:12px}

  .footer{margin-top:14px;display:flex;justify-content:space-between;gap:10px;align-items:center}

</style>
</head>
<body>
  <header>
    <div class="wrap">
      <h1>Hydropower Formula – Live Demo</h1>
      <div class="sub">Interactive calculator for <span class="formula"><b>P</b> = <b>η</b> · ρ · g · <b>Q</b> · <b>h</b></span> (all SI units). Adjust inputs and see power update instantly.</div>
    </div>
  </header>
  <main class="wrap grid g2">
    <section class="card">
      <h2>Inputs</h2>
      <div class="controls">
        <div class="row">
          <label for="eta">Efficiency η</label>
          <input id="eta_r" type="range" min="0.50" max="0.95" step="0.01" value="0.80">
          <input id="eta" type="number" step="0.01" min="0.50" max="0.95" value="0.80">
        </div>
        <div class="row">
          <label for="Q">Flow rate Q <span class="unit">(m³/s)</span></label>
          <input id="Q_r" type="range" min="0" max="30000" step="10" value="15000">
          <input id="Q" type="number" step="10" min="0" max="100000" value="15000">
        </div>
        <div class="row">
          <label for="h">Head h <span class="unit">(m)</span></label>
          <input id="h_r" type="range" min="0" max="400" step="1" value="181">
          <input id="h" type="number" step="1" min="0" max="2000" value="181">
        </div>
        <details>
          <summary>Advanced (density ρ and gravity g)</summary>
          <div class="row">
            <label for="rho">Density ρ <span class="unit">(kg/m³)</span></label>
            <input id="rho_r" type="range" min="950" max="1030" step="1" value="1000">
            <input id="rho" type="number" step="1" min="900" max="1200" value="1000">
          </div>
          <div class="row">
            <label for="g">Gravity g <span class="unit">(m/s²)</span></label>
            <input id="g_r" type="range" min="9.60" max="9.90" step="0.01" value="9.81">
            <input id="g" type="number" step="0.01" min="9.00" max="12.00" value="9.81">
          </div>
        </details>

        <div class="presets">
          <button class="ghost" id="reset">Reset</button>
          <button id="threegorges">Three Gorges example</button>
          <span class="pill">Units: SI (W, m, m³/s)</span>
        </div>
      </div>
    </section>

    <section class="card">
      <h2>Output</h2>
      <div id="p_mw" class="big mono">— MW</div>
      <div class="small" id="p_detail">P = η·ρ·g·Q·h = — W</div>
      <div class="bar" title="Relative to 25 GW scale"><div id="barFill"></div></div>
      <small class="small">Scale reference: bar fills at 25 GW</small>

      <h3 style="margin-top:14px">Per‑m³ energy and intuition</h3>
      <table class="tbl">
        <thead>
          <tr><th>Quantity</th><th>Expression</th><th>Value</th></tr>
        </thead>
        <tbody>
          <tr><td>Energy per m³ of water (at head h)</td><td class="mono">E/m³ = ρ·g·h</td><td id="e_per_m3">— J/m³</td></tr>
          <tr><td>Power per (m³/s) of flow</td><td class="mono">P/(m³/s) = η·ρ·g·h</td><td id="p_per_cum">— W per (m³/s)</td></tr>
        </tbody>
      </table>

      <details>
        <summary>Show full breakdown</summary>
        <table class="tbl">
          <tbody>
            <tr><td>η (efficiency)</td><td class="mono" id="d_eta">—</td></tr>
            <tr><td>ρ (kg/m³)</td><td class="mono" id="d_rho">—</td></tr>
            <tr><td>g (m/s²)</td><td class="mono" id="d_g">—</td></tr>
            <tr><td>Q (m³/s)</td><td class="mono" id="d_Q">—</td></tr>
            <tr><td>h (m)</td><td class="mono" id="d_h">—</td></tr>
            <tr><td>Product η·ρ·g·Q·h</td><td class="mono" id="d_prod">—</td></tr>
          </tbody>
        </table>
      </details>

      <div class="footer">
        <div class="small">Nearest MW: <span class="mono" id="nearest_mw">—</span></div>
        <div class="small">Also: <span class="mono" id="p_gw">— GW</span></div>
      </div>
    </section>

    <section class="card" style="grid-column:1/-1">
      <h2>How to talk about it in your presentation</h2>
      <p class="formula"><b>P</b> (power) grows when either the drop is taller (<b>h</b> increases) or more water moves each second (<b>Q</b> increases). The constant terms ρ (water density) and g (gravity) turn height into energy, and η captures real‑world losses in the turbine/generator. Together: <b>P = η·ρ·g·Q·h</b>.</p>
      <ul>
        <li>Use the sliders live while presenting to show how doubling <b>Q</b> doubles power, or how raising <b>h</b> boosts power linearly.</li>
        <li>Open “Advanced” to explain why we typically fix ρ≈1000 kg/m³ and g≈9.81 m/s².</li>
        <li>Quote the “Power per (m³/s)” number to make quick mental math: each extra m³/s of flow adds that many Watts at your chosen head and η.</li>
      </ul>
    </section>
  </main>

<script>
  const $ = (id)=>document.getElementById(id);
  const nf0 = new Intl.NumberFormat(undefined,{maximumFractionDigits:0});
  const nf2 = new Intl.NumberFormat(undefined,{maximumFractionDigits:2});

  const inputs = {
    eta: $('eta'), eta_r: $('eta_r'),
    Q: $('Q'), Q_r: $('Q_r'),
    h: $('h'), h_r: $('h_r'),
    rho: $('rho'), rho_r: $('rho_r'),
    g: $('g'), g_r: $('g_r')
  };

  function sync(a,b){ a.addEventListener('input',()=>{ b.value = a.value; calc(); }); }
  sync(inputs.eta_r, inputs.eta); sync(inputs.eta, inputs.eta_r);
  sync(inputs.Q_r, inputs.Q);     sync(inputs.Q, inputs.Q_r);
  sync(inputs.h_r, inputs.h);     sync(inputs.h, inputs.h_r);
  sync(inputs.rho_r, inputs.rho); sync(inputs.rho, inputs.rho_r);
  sync(inputs.g_r, inputs.g);     sync(inputs.g, inputs.g_r);

  function calc(){
    const eta = clamp(parseFloat(inputs.eta.value),0,1);
    const Q   = Math.max(0, parseFloat(inputs.Q.value));
    const h   = Math.max(0, parseFloat(inputs.h.value));
    const rho = Math.max(0, parseFloat(inputs.rho.value));
    const g   = Math.max(0, parseFloat(inputs.g.value));

    const e_per_m3 = rho*g*h;           // J per m^3
    const p_per_cum = eta*e_per_m3;     // W per (m^3/s)
    const P = p_per_cum * Q;            // W

    $('e_per_m3').textContent = nf0.format(e_per_m3) + ' J/m³';
    $('p_per_cum').textContent = nf0.format(p_per_cum) + ' W per (m³/s)';

    $('p_detail').textContent = `P = ${eta.toFixed(2)} · ${nf0.format(rho)} · ${g.toFixed(2)} · ${nf0.format(Q)} · ${nf0.format(h)} = ${nf0.format(P)} W`;

    const MW = P/1e6, GW = P/1e9; 
    $('p_mw').textContent = nf2.format(MW) + ' MW';
    $('nearest_mw').textContent = nf0.format(Math.round(MW));
    $('p_gw').textContent = nf2.format(GW);

    // Bar relative to 25 GW
    const pct = Math.max(0, Math.min(100, (GW/25)*100));
    $('barFill').style.width = pct.toFixed(2)+'%';

    // Breakdown
    $('d_eta').textContent = eta.toFixed(2);
    $('d_rho').textContent = nf0.format(rho);
    $('d_g').textContent   = g.toFixed(2);
    $('d_Q').textContent   = nf0.format(Q);
    $('d_h').textContent   = nf0.format(h);
    $('d_prod').textContent= nf0.format(P) + ' W';
  }
  function clamp(x,a,b){ return Math.max(a, Math.min(b, x)); }

  $('reset').addEventListener('click', ()=>{
    inputs.eta.value=inputs.eta_r.value=0.80;
    inputs.Q.value=inputs.Q_r.value=15000;
    inputs.h.value=inputs.h_r.value=181;
    inputs.rho.value=inputs.rho_r.value=1000;
    inputs.g.value=inputs.g_r.value=9.81;
    calc();
  });

  $('threegorges').addEventListener('click', ()=>{
    inputs.eta.value=inputs.eta_r.value=0.80;
    inputs.Q.value=inputs.Q_r.value=15000;
    inputs.h.value=inputs.h_r.value=181;
    inputs.rho.value=inputs.rho_r.value=1000;
    inputs.g.value=inputs.g_r.value=9.81;
    calc();
  });

  // Initial compute
  calc();
</script>
</body>
</html>
